<ion-view title="{{title}}">

	<div class="bar bar-subheader">
		<div class="row">
			<div class="col col-50"><h1 > Browse Jobs</h1></div>
			<div class="col total-job">&nbsp;</div>
			<div class="col total-job"><b>50</b> Jobs Open</div>
		</div>
	</div>

	<ion-content ng-init="requestPending=false">

		<ion-refresher 
			ng-init="showRefresher=false" 
			ng-if="showRefresher"
			pulling-text="Pull to refresh..."
			refreshing-icon="ion-loading-c"
			on-refresh="onPullToRefresh()">
			
		</ion-refresher>
	
		<div class="list list-inset job-list single-job-card" >

		    <ion-item ng-show="showConnectionError" ng-click="onViewLoad()" class="message connection-error">
		    	<i class="icon ion-alert-circled"></i>
			    Connection error. Try again.
			</ion-item>


			<ion-item  ng-repeat="job in jobs" ng-controller="controller" ng-click="toggleAccordian()">
		        
		        <div class="job" ng-class="(jobOpen)? 'available' : 'expire'">  

		            <div ng-if="jobOpen">

						<div class="row" >
							<div class="col" >
								<div class="row" >
									<div class="col col-80" >
										<h2 class="job-title">
										<ul id="ticker{{job.post_id}}">
										<li><a>{{ job.post_title }}</a></li><!-- eccetera -->
										</ul>
										</h2>
										<span class="date">{{start_date}} </span>
									</div>

									<div class="col col" >
										<div class="job-price">
											${{ job.job_wages }}
										</div>
									</div>
								</div>

								<div class="row job-details">
									<div class="col">
										<div class="job-time">
											<i class="ion-android-clock"></i>  
											<span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span>
											<br>
											<i class="ion-flag"></i>&nbsp;&nbsp;
											<span class="time">{{ job.job_location }}</span>
										</div>
									</div>
								</div>
							</div>
						</div>


						<div class="job-actions">

							<div class="row">

								<div class="col col-50">
									<div class="applicants ">
										<i class="ion-thumbsup"></i><span>HIRED</span>
										<!-- <div class="minyawn-head">&nbsp;</div> 
										<b>{{job.applied_user_id.length}}</b>	Applied<br> {{required_minyawns.length}} Needed 
										-->
									</div>	
								</div>

								<div class="col col-50">
									<div id="draggableContainer">
										<i class="ion-ios7-download-outline appicant-job" ng-click="onSingleJobClick(job.post_id)" ></i>
										<div class="apply-button apply ">{{applicationStatus}}</div> 

										<!-- <div class="applicants">
										<div class="min-icon minyawn-empty">&nbsp;</div>
										</div> -->
									</div>
								</div>

							</div>

						</div>

						<!--	<ion-item class="item-accordion single-job-apply" ng-if="accordianToggle" >

							<div class="row ">
								<div class="col col-50 " ng-switch="jobStatus">
									
									<div class="applied" ng-switch-when="Applied">
										<span></span>
										Applied
									</div>
									<div class="hired" ng-switch-when="Hired">
										<span></span>
										Hired
									</div>
									<div  ng-switch-when="Not Applied">
										
									</div>
									
								</div>
								<div class="col col-50">
									<a class="button   button-block icon-right ion-ios7-arrow-forward button-balanced pull-right" ng-click="onSingleJobClick(job.post_id)">View Job</a>
								</div>
							</div>

							</ion-item>-->

		       		</div>

			       	<!-- condition for closed/expired jobs -->
			        <div  ng-if="!jobOpen" >
			    	
						<div class="row" >

							<div class="col" >
								<h2 class="job-title">
									<ul id="ticker{{job.post_id}}">
										<li><a>{{ job.post_title }}</a></li><!-- eccetera -->
									</ul>
								</h2>

								<div class="row job-details">
									<div class="col">
										<h4 class="detail-header">When</h4>
										<div class="job-time">
											<!-- <span class="time">{{ job.days_to_job_expired }} DAYS TO GO </span> -->
											<span class="date">{{start_date}}</span>
											<span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span>
										</div>
									</div>

									<div class="col col-20">
										<h4 class="detail-header">Wages</h4>
										<div class="job-price">${{ job.job_wages }}</div>
									</div>
								</div>

								<div class="job-details">
									<h4 class="detail-header">Where</h4>
									<div class="job-location">{{ job.job_location }}</div>
								</div>
							</div>

						</div>


						<div class="job-actions"  >
							<!-- ng-class="(accordianToggle)? 'down-arrow' : 'up-arrow'" -->
							<i class="up-arrow" ng-class="(accordianToggle) ? 'rotate' : 'rotateCounterwise'"></i>
							
							<div class="row">

								<div class="col col-50">
									<div class="applicants ">
										<!-- <div class="minyawn-head">&nbsp;</div> -->
										<b>{{job.applied_user_id.length}}</b>Applied<br>{{required_minyawns.length}} Needed 
									</div>	
								</div>

								<div class="col col-50">
									<div id="draggableContainer">
										<!-- <m-draggable ng-if="showApplySlider" on-apply-job="applyForJob($jobID)" job-post-id="{{job.post_id}}" on-touch="disableMenuDrag()" on-release="enableMenuDrag()">
										</m-draggable> -->

										<div class="apply-button apply">{{applicationStatus}}</div> 

										<!-- <div class="applicants">
										<div class="min-icon minyawn-empty">&nbsp;</div>
										</div> -->
									</div>
								</div>

							</div>

						</div>

						<ion-item class="item-accordion single-job-apply" ng-show="accordianToggle" >

							<div class="row ">
								<div class="col col-50 " ng-switch="jobStatus">
									<div class="applied" ng-switch-when="Applied">
										<span></span>
										Applied
									</div>
									<div class="hired" ng-switch-when="Hired">
										<span></span>
										Hired
									</div>
									<div  ng-switch-when="Not Applied">
									</div>
								</div>

								<div class="col col-50">
									<a class="button   button-block icon-right ion-ios7-arrow-forward button-balanced pull-right" ng-click="onSingleJobClick(job.post_id)">View Job</a>
								</div>
							</div>

						</ion-item>

		        	</div>

		        </div>   

			</ion-item>

		</div>

		<ion-item ng-show="showNoMoreJobs" class="message no-more">
	      <i class="icon ion-eye-disabled"></i>
	      That's all folks! No more jobs to be displayed.
	    </ion-item>

		<ion-infinite-scroll icon="ion-loading-c" distance="5%" ng-if="canLoadMore" on-infinite="onInfiniteScroll()">
		</ion-infinite-scroll>

	</ion-content>

</ion-view>

