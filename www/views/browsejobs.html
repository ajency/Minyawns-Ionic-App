<ion-view title="BROWSE JOBS">

  <ion-content ng-init="requestPending=false">

	<ion-refresher ng-init="showRefresher=false" ng-if="showRefresher"
		pulling-text="Pull to refresh..."
		refreshing-icon="ion-loading-c"
		on-refresh="onPullToRefresh()">
		
	</ion-refresher>

	<div class="list list-inset job-list single-job-card">

	    <ion-item ng-show="showConnectionError" ng-click="onViewLoad()" class="message connection-error">
	    	<i class="icon ion-alert-circled"></i>
		    Connection error. Try again.
		</ion-item>

		<ion-item class="job " ng-class="(jobOpen)? 'available' : 'expire'" ng-repeat="job in jobs" ng-controller="BrowseJobsItemController"  >
          
           <div ng-if="jobOpen && jobShow">
			
			<div class="row  " ng-click="onSingleJobClick(job.post_id)">
				<div class="col" >
					<h2 class="job-title">{{ job.post_title }}</h2>
			<div class="row job-details">
	  			<div class="col">
	  				<h4 class="detail-header">When</h4>
	  				<div class="job-time">
	  					<span class="time">{{ job.days_to_job_expired }} DAYS TO GO </span>
	  					<span class="date">{{start_date}}</span>
	  					<span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span>
	  				</div>
	  			</div>
	  			<div class="col col-20">
	  				<h4 class="detail-header">Wages</h4>
	  				<div class="job-price">
	  					${{ job.job_wages }}
	  				</div>
	  			</div>
	  		</div>
				
				<div class="job-details">
	  			<h4 class="detail-header">Where</h4>
	  			<div class="job-location">
	  				{{ job.job_location }}
	  			</div>
	  		</div>
				</div>
			</div>

		  <div class="job-actions">
		  	<!-- <div class="apply-button">
		  		Apply Now 
		  		<div class="minyawn-head">&nbsp;</div>
		  	</div> -->
		  	<div  >
               
			  	<div class="applicants">
			  	 MINYAWNS <br>
				  <b>3</b> Needed /  <b>2</b> Applied
			
			  	</div>

              

			  	<div id="draggableContainer">

				  	<!-- <m-draggable ng-if="showApplySlider" on-apply-job="applyForJob($jobID)" job-post-id="{{job.post_id}}" on-touch="disableMenuDrag()" on-release="enableMenuDrag()">
				  	</m-draggable> -->
  					
  					<div class="apply-button" >
		  			   {{applicationStatus}}
		  			</div> 
				 	
				 	<!-- <div class="applicants">
						<div class="min-icon minyawn-empty">&nbsp;</div>
			  		</div> -->
				
				</div>

		    </div>
		 </div>
	    </div>

        <!-- condition for closed jobs -->
        <div  ng-if="!jobOpen && jobShow" >
	    	<div class="row" ng-click="onSingleJobClick(job.post_id)">
				<div class="col">
				  <div class="job-details">
						<h2 class="job-title">{{ job.post_title }}</h2>
				  </div>
				</div>
				<div class="col col-20">
				  
				</div>
			</div>
		  	<div class="job-actions">
		  		<div class="apply-button">
		  			{{applicationStatus}}
		  		</div>
		  		
		  		<div class="applicants">
		  		  <div ng-if="required_minyawns.length==1"  class="min-icon" ng-class="job.no_applied>0 || job.no_hired>0 ?'minyawn-applied' : '' ">&nbsp;</div>
                  <div ng-if="required_minyawns.length>1"   class="min-icon" ng-class="job.no_applied>0 || job.no_hired>0 ?'minyawn-applied' : '' ">&nbsp;</div>
                  <div ng-if="required_minyawns.length>1"   class="min-count">+ {{required_minyawns.length-1}}</div>
		  		</div>

		  	</div>
        </div>

		</ion-item>
</div>
	     <!-- <ion-item class="job not-applicable" ng-controller="BrowseJobsItemController" >

			

		</ion-item>  -->

		<ion-item ng-show="showNoMoreJobs" class="message no-more">
	      <i class="icon ion-eye-disabled"></i>
	      That's all folks! No more jobs to be displayed.
	    </ion-item>

	</div>

	<ion-infinite-scroll icon="ion-loading-c" distance="5%" ng-if="canLoadMore" on-infinite="onInfiniteScroll()">
	</ion-infinite-scroll>

   </ion-content>

</ion-view>


