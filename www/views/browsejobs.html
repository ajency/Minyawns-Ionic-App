<ion-view title="{{title}}">

  <ion-content ng-init="requestPending=false">

	<ion-refresher ng-init="showRefresher=false" ng-if="showRefresher"
		pulling-text="Pull to refresh..."
		refreshing-icon="ion-loading-c"
		on-refresh="onPullToRefresh()">
		
	</ion-refresher>

	<div class="list list-inset job-list single-job-card">

	    <ion-item ng-show="showConnectionError" ng-click="onViewLoad()" class="message connection-error">
	    	<i class="icon ion-alert-circled"></i>
		    Connection error. Try again.
		</ion-item>


		<ion-item  ng-repeat="job in jobs" ng-controller="controller" ng-click="toggleAccordian()">
        
        <div class="job" ng-class="(jobOpen)? 'available' : 'expire'">  

           <div ng-if="jobOpen">

			<div class="row" >


				<div class="col" >
					<h2 class="job-title">
	 					<ul id="ticker{{job.post_id}}">
	   						<li><a>{{ job.post_title }}</a></li><!-- eccetera -->
	   					</ul>
					</h2>
			<div class="row job-details">
	  			<div class="col">
	  				<h4 class="detail-header">When</h4>
	  				<div class="job-time">
	  					<span class="time">{{ job.days_to_job_expired }} DAYS TO GO </span>
	  					<span class="date">{{start_date}}</span>
	  					<span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span>
	  				</div>
	  			</div>
	  			<div class="col col-20">
	  				<h4 class="detail-header">Wages</h4>
	  				<div class="job-price">
	  					${{ job.job_wages }}
	  				</div>
	  			</div>
	  		</div>
				
				<div class="job-details">
	  			<h4 class="detail-header">Where</h4>
	  			<div class="job-location">
	  				{{ job.job_location }}
	  			</div>
	  		</div>
				</div>
			</div>

		  <div class="job-actions">
		  	<!-- <div class="apply-button">
		  		Apply Now 
		  		<div class="minyawn-head">&nbsp;</div>
		  	</div> -->

               

		  	<div class="row">
             

              
<div class="col">
			  	<div id="draggableContainer">

				  	<!-- <m-draggable ng-if="showApplySlider" on-apply-job="applyForJob($jobID)" job-post-id="{{job.post_id}}" on-touch="disableMenuDrag()" on-release="enableMenuDrag()">
				  	</m-draggable> -->
  					
  					<div class="apply-button" >
		  			   {{applicationStatus}}
		  			</div> 
				 	
				 	<!-- <div class="applicants">
						<div class="min-icon minyawn-empty">&nbsp;</div>
			  		</div> -->
				
				</div>
</div>

   <div class="col col-75">
			  	<div class="applicants">
			  	<!-- <div class="minyawn-head">&nbsp;</div> -->
				  <b>{{required_minyawns.length}}</b> Needed /  <b>{{job.applied_user_id.length}}</b> Applied
			
			  	</div>
				</div>
		    </div>
		 
	     </div>
       </div>

        <!-- condition for closed/expired jobs -->
        <div  ng-if="!jobOpen" >
	    	<div class="row" >

				<div class="col" >
					<h2 class="job-title">{{ job.post_title }}</h2>
			<div class="row job-details">
	  			<div class="col">
	  				<h4 class="detail-header">When</h4>
	  				<div class="job-time">
	  					<!-- <span class="time">{{ job.days_to_job_expired }} DAYS TO GO </span> -->
	  					<span class="date">{{start_date}}</span>
	  					<span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span>
	  				</div>
	  			</div>
	  			<div class="col col-20">
	  				<h4 class="detail-header">Wages</h4>
	  				<div class="job-price">
	  					${{ job.job_wages }}
	  				</div>
	  			</div>
	  		</div>
				
				<div class="job-details">
	  			<h4 class="detail-header">Where</h4>
	  			<div class="job-location">
	  				{{ job.job_location }}
	  			</div>
	  		</div>
				</div>
			</div>

		  <div class="job-actions">
		  	<!-- <div class="apply-button">
		  		Apply Now 
		  		<div class="minyawn-head">&nbsp;</div>
		  	</div> -->
		  	<div  >
               
			  	<div class="applicants">
			  	<!-- <div class="minyawn-head">&nbsp;</div> -->
				  <b>{{required_minyawns.length}}</b> Needed /  <b>{{job.applied_user_id.length}}</b> Applied
			
			  	</div>

              

			  	<div id="draggableContainer">

				  	<!-- <m-draggable ng-if="showApplySlider" on-apply-job="applyForJob($jobID)" job-post-id="{{job.post_id}}" on-touch="disableMenuDrag()" on-release="enableMenuDrag()">
				  	</m-draggable> -->
  					
  					<div class="apply-button" >
		  			   {{applicationStatus}}
		  			</div> 
				 	
				 	<!-- <div class="applicants">
						<div class="min-icon minyawn-empty">&nbsp;</div>
			  		</div> -->
				
				</div>

		    </div>
		 </div>
        </div>


        </div>   

		
	

	     <!-- <ion-item class="job not-applicable" ng-controller="BrowseJobsItemController" >
>>>>>>> 99775bcf33a0e9e721c852076c54da93473794c2

          <!-- Accordian View -->
          <ion-item class="item-accordion" ng-show="accordianToggle" >

                <div class="single-job-apply cssSlideUp">
			<div class="row">
				<div class="col">
					<h3 class="detail-header">View the job</h3>
				</div>
				<div class="col col-20">
					&nbsp;
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="helper-text">
						To get details of this job, Just click the tick icon & browse the job.
					</div>
					<!--<button class="button button-small button-positive apply-btn" ng-click="onSingleJobClick(job.post_id)">
					  View job
					</button>-->
				</div>
				<div class="col col-20">
					<div class="pic-upload" ng-click="onSingleJobClick(job.post_id)">
					 <i class="icon ion-checkmark-circled" ></i> 
						<img ng-src="{{profileImage}}" ></img>
					</div>
				</div>
			</div>
		   </div>
          </ion-item>

		</ion-item>
</div>
	     

		<ion-item ng-show="showNoMoreJobs" class="message no-more">
	      <i class="icon ion-eye-disabled"></i>
	      That's all folks! No more jobs to be displayed.
	    </ion-item>

	</div>

	<ion-infinite-scroll icon="ion-loading-c" distance="5%" ng-if="canLoadMore" on-infinite="onInfiniteScroll()">
	</ion-infinite-scroll>

   </ion-content>

</ion-view>


