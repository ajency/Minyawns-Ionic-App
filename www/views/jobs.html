<ion-view>

	<ion-nav-title>
		<img src='./img/logo.png' height='30px'/>
    </ion-nav-title>

    <ion-nav-buttons side="left">
		<button menu-toggle="left" class="button button-icon icon ion-drag main-menu-toggle"></button>
	</ion-nav-buttons>

	<div class="bar bar-subheader navheader">
		<div class="row">
			<div class="col col-50"><h1>{{title}}</h1></div>
			<div class="col total-job">&nbsp;</div>
			<div class="col total-job" ng-switch="display">
				<b ng-hide="openJobsLoader" ng-switch-when="No-Error">{{openJobs}}</b>
				<div ng-show="openJobsLoader" ng-switch-when="No-Error"><i class="icon ion-loading-c"></i></div>
				<div ng-switch-when="Error"><i class="icon ion-alert-circled"></i></div>
				Jobs Open
			</div>
		</div>
	</div>

	<ion-content
		class="has-subheader"
		ng-init="requestPending=false" 
		scrollbar-y="false"
		delegate-handle="mainScroll"
		sticky-sub-header>

		<ion-refresher 
			ng-init="showRefresher=false" 
			ng-if="showRefresher"
			on-refresh="onPullToRefresh()">
		</ion-refresher>
	
		<div class="list list-inset job-list single-job-card" >

		    <ion-item ng-show="showConnectionError" ng-click="onViewLoad()" class="message connection-error">
		    	<i class="icon ion-alert-circled"></i>
			    Connection error. Try again.
			</ion-item>

			<ion-item ng-repeat="job in jobs" ng-controller="controller" ng-click="toggleAccordian()">
		        
		        <div class="job">  

		            <!-- <div ng-if="jobOpen"> -->

					<div class="row" >
						<div class="col" >
							<div class="row" >
								<div class="col col-75" >
									<h2 class="job-title">
									<ul id="ticker{{job.post_id}}">
									<li><a>{{ job.post_title }}</a></li><!-- eccetera -->
									</ul>
									</h2>
									<span class="date">{{start_date}} </span>
								</div>

								<div class="col col" >
									<div class="job-price">
										${{ job.job_wages }}
									</div>
								</div>
							</div>

							<div class="row job-details">
								<div class="col">
									<div class="job-time">
										<div class="row">
											<div class="col col-10"><i class="ion-clock"></i> </div>
											<div class="col col-90"><span class="time">{{ job.job_start_time }}{{job.job_start_meridiem}} - {{ job.job_end_time }}{{ job.job_end_meridiem }}</span></div>
										</div>
										<div class="row">
											<div class="col col-10"><i class="ion-flag"></i> </div>
											<div class="col col-90"><span class="time">{{ job.job_location }}</span></div>
										</div>
										
										
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="job-actions">

                        <div class="row" ng-click="onSingleJobClick(job.post_id)">

                            <div class="col col-33" ng-switch="jobStatus"> 
                                <div class="applied" ng-switch-when="Applied">
                                    <span></span>
                                    <b>Applied</b>
                                </div>
                                <div class="hired" ng-switch-when="Hired">
                                    <span></span>
                                    <b>Hired</b>
                                </div>
                            </div>

                            <div class="col col-67">
                                <div id="draggableContainer" >
                                    <i class="ion-ios7-download-outline appicant-job"></i>
                                    
                                    <div ng-class="(applicationStatus==='Applications Open')? 'apply-button apply' : 'expired job-closed apply-button'">{{applicationStatus}}</div>

                                </div>
                            </div>

                        </div>

                    </div>

		       		<!-- </div> -->

		        </div>   

			</ion-item>

		</div>

		<ion-item ng-show="showNoMoreJobs" class="message no-more">
			<i class="icon ion-eye-disabled"></i>
			That's all folks! No more jobs <br>to be displayed.
	    </ion-item>

		<ion-infinite-scroll
			distance="1%" 
			ng-if="canLoadMore" 
			on-infinite="onInfiniteScroll()">
		</ion-infinite-scroll>

	</ion-content>

</ion-view>

